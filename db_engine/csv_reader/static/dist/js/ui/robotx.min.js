function addpoint(){$("#robot_main_two").html("");for(var t=$(".robot-main-fields").children("li").length,o="",e="robotx_content_id"+modelCounter++,i=$(".robot-main-div-selected").attr("commid"),l=1;l<t;l++){var n=$(".robot-main-fields").children("li").eq(l).children("ul").children(".robot-fields-select-elem").hasClass("add-background"),a=$(".robot-main-fields").children("li").eq(l).children("ul").children(".robot-fields-select-key").hasClass("add-background"),r=$(".robot-main-fields").children("li").eq(l).children("ul").children(".robot-fields-name").attr("data");if(n){var s=$(".robot-main-fields").children("li").eq(l).children("ul").children(".robot-fields-name").text();if(a){h++;var d=$(".robot-main-fields").children("li").eq(l).children("ul").children(".robot-fields-name").attr("data_type"),c='<li class="robot-list-conetnt" data="'+r+'" ys="1" data_type="'+d+'"><span class="robot-list-conetnt-i"></span>'+s+"</li>"}else var c='<li class="robot-list-conetnt" data="'+r+'" ys="0" ><span></span>'+s+"</li>";o+=c}}var b='<li id="'+e+'" class="robotx_content_id robot-main-two-ec jtk-endpoint-anchor ui-draggable ui-draggable-handle jtk-connected" style="position:absolute; left:276px;top:170px;height:148px;" data="'+i+'" n1="" ><ul class="robot-main-one-table-list"><li class="robot-list-titles robot-list-title"><i></i>容器表</li>'+o+"</ul></li>";$("#robot_main_two").append(b),robotx.addEndpoint(e,{anchors:"RightMiddle"},hollowCircle),robotx.addEndpoint(e,{anchors:"LeftMiddle"},hollowCircle),robotx.addEndpoint(e,{anchors:"TopCenter"},hollowCircle),robotx.addEndpoint(e,{anchors:"BottomCenter"},hollowCircle),robotx.repaintEverything(),$("#"+e).draggable({containment:"parent",scroll:!0,drag:function(t,o){robotx.repaintEverything()},stop:function(){robotx.repaintEverything()}});for(var u=0,_=5,p=0;p<tablechinese.length;p++)if($(".robotx_content_id").attr("data")==$("#robot_one>li").eq(p).children("ul").children("li").eq(0).text());else{var f="table_model_"+modelCounter++,m=($(".robot-main").css("left"),$("#robot_one").children("li").eq(p).children("ul").children("li").eq(0).text());$("#robot_main_two").append('<li id="'+f+'" class="robot-main-two-ec jtk-endpoint-anchor ui-draggable ui-draggable-handle jtk-connected" style="position:absolute; left:'+u+"px;top:"+_+'px;" data="'+m+'" n1="" ns="" gl=""><ul class="robot-main-one-table-list"><li class="robot-list-title">'+tablechinese[p]+"</li></ul></li>");for(var g=0;g<return_info[p].length;g++)$("#"+f+" ul").append('<li class="robot-list-conetnt" data="'+return_info[p][g].fieldType+'" data_type="'+return_info[p][g].fieldDateFormat+'" >'+return_info[p][g].fieldName+"</li>");u+=276,(p>1&&(p+1)%3==0||4==p)&&(_+=174,u=0),3==p&&(u+=276),robotx.addEndpoint(f,{anchors:"RightMiddle"},hollowCircle),robotx.addEndpoint(f,{anchors:"LeftMiddle"},hollowCircle),robotx.addEndpoint(f,{anchors:"TopCenter"},hollowCircle),robotx.addEndpoint(f,{anchors:"BottomCenter"},hollowCircle),robotx.repaintEverything(),$("#"+f).draggable({containment:"parent",scroll:!0,drag:function(t,o){robotx.repaintEverything()},stop:function(){robotx.repaintEverything()}})}}function init_robotx(t){$(".robot-main-two-fields").show(),$(".robot-main-three-fields").hide(),$(".robot-main-two-fields-top,.robot-main-two-fields-bottom").show(),$(".robot-main-two").addClass("robot-main-change"),$(".robot-main-footer").hide(),$(".robot-main-two-fields-bottom>p").html("从下表中勾选与容器表关联的字段并配置字段类型"),$(".robot-fields-footer button:first-child").show(),$("#robot_main_two_fields_bottom>li").not(":first-child").remove(),$(".top-second").find("p").eq(1).find("span").remove(),$(".top-second").find("p").eq(0).text($("#"+t.sourceId).children("ul").children(".robot-list-title").text()),$("#robot_main_two_fields_bottom").attr("data",$("#"+t.sourceId).attr("data")),$("#data_time").text(""),$(".top_three>ul>li>i").removeClass("add-background");var o=$("#"+t.sourceId).children("ul").children(".robot-list-conetnt").length,e=$("#"+t.targetId).children("ul").children(".robot-list-conetnt").length,i=0;$(".top-first").find("p").eq(1).find("span").remove();for(var l=0;l<e;l++){var n=$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(l).text(),a=$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(l).attr("data");if($("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(l).children("span").hasClass("robot-list-conetnt-i")){var r="<span>"+n+"</span>",s="",d="";$(".top-first").find("p").eq(1).append(r),$(".top-second").find("p").eq(1).append("<span></span>");for(var c=0;c<o;c++){var b=$("#"+t.sourceId).children("ul").children(".robot-list-conetnt").eq(c).text(),u=$("#"+t.sourceId).children("ul").children(".robot-list-conetnt").eq(c).attr("data"),h="<li>"+b+"</li>";if(s+=h,"date"==u){var h="<li>"+b+"</li>";d+=h}}console.log(d);var _="";if(console.log($("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(l).attr("data_type")),"undefined"==$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(l).attr("data_type")?_="":(_=$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(l).attr("data_type"),4==_.length?$("#data_time").text("年"):7==_.length?$("#data_time").text("月"):10==_.length?$("#data_time").text("日"):13==_.length?$("#data_time").text("时"):16==_.length?$("#data_time").text("分"):19==_.length&&$("#data_time").text("秒")),console.log(_),""!=$("#"+t.sourceId).attr("gl")){var p=$("#"+t.sourceId).attr("gl"),f=p.split(",");if("date"==$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(l).attr("data")){var h='<li><ul><li class="firlds-kuans">'+n+'</li><li class="firlds-kuans robotx_glzds"><label>'+f[i]+'<i></i></label><ul class="robotx_glzd"><li></li>'+d+'</ul></li><li class="fields-skin" data_type="'+_+'">'+a+"</li></ul></li>";$("#robot_main_two_fields_bottom").append(h)}else{var h='<li><ul><li class="firlds-kuans">'+n+'</li><li class="firlds-kuans robotx_glzds"><label>'+f[i]+'<i></i></label><ul class="robotx_glzd"><li></li>'+s+'</ul></li><li class="fields-skin" data_type="'+_+'">'+a+"</li></ul></li>";$("#robot_main_two_fields_bottom").append(h)}i++}else if("date"==$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(l).attr("data")){var h='<li><ul><li class="firlds-kuans">'+n+'</li><li class="firlds-kuans robotx_glzds"><label><i></i></label><ul class="robotx_glzd"><li></li>'+d+'</ul></li><li class="fields-skin" data_type="'+_+'">'+a+"</li></ul></li>";$("#robot_main_two_fields_bottom").append(h)}else{var h='<li><ul><li class="firlds-kuans">'+n+'</li><li class="firlds-kuans robotx_glzds"><label><i></i></label><ul class="robotx_glzd"><li></li>'+s+'</ul></li><li class="fields-skin" data_type="'+_+'">'+a+"</li></ul></li>";$("#robot_main_two_fields_bottom").append(h)}}}if(null!=sessionStorage.getItem("robotx_two")){if(""!=$("#"+t.sourceId).attr("n1")){"forward"==$("#"+t.sourceId).attr("n1")?($(".top_three>ul>li").eq(0).find("i").addClass("add-background"),$(".top_three_input").attr("disabled",!0),$(".top_three_input").val("")):($(".top_three>ul>li").eq(1).find("i").addClass("add-background"),""==$("#"+t.sourceId).attr("ns")?($(".top_three_input").attr("disabled",!0),$(".top_three_input").val("")):($(".top_three_input").attr("disabled",!1),$(".top_three_input").val($("#"+t.sourceId).attr("ns"))))}if(""!=$("#"+t.sourceId).attr("gl"))for(var m=$("#"+t.sourceId).attr("gl"),g=m.split(","),l=0;l<g.length;l++)console.log(l),$(".top-second").find("p").eq(1).find("span").eq(l).text(g[l])}else if(""!=$("#"+t.sourceId).attr("gl"))for(var m=$("#"+t.sourceId).attr("gl"),g=m.split(","),l=0;l<g.length;l++)console.log(l),$(".top-second").find("p").eq(1).find("span").eq(l).text(g[l]);for(var v=document.getElementById("right_key"),l=0;l<$("#robot_main_two>svg").length;l++){var x=$("#robot_main_two>svg")[l];right_key(v,x)}$("#dele").click(function(){svg_content.remove(),v.style.display="none"})}function right_key(t,o){o.oncontextmenu=function(o){var o=o||window.event,e=o.clientX,i=o.clientY;return svg_content=this,t.style.display="block",t.style.left=e+"px",t.style.top=i+"px",t.style.zIndex=13,!1},document.onclick=function(o){var o=o||window.event;t.style.display="none"},t.onclick=function(t){var t=t||window.event;t.cancelBubble=!0}}function robotx_save_one(){for(var t=[],o=[],e="",i="",l=1;l<$(".robot-main-fields>li").length;l++){var n=$(".robot-main-fields").children("li").eq(l).children("ul").children("li").eq(0).text(),a=$(".robot-main-fields").children("li").eq(l).children("ul").children("li").eq(0).attr("data"),r=$(".robot-main-fields").children("li").eq(l).children("ul").children("li").eq(0).attr("data_type");e=$(".robot-main-fields").children("li").eq(l).children("ul").children("li").eq(1).hasClass("add-background")?1:0,i=$(".robot-main-fields").children("li").eq(l).children("ul").children("li").eq(2).hasClass("add-background")?1:0,o.push({robot_one_data_filds_addbac:e,robot_one_data_filds_text:n,robot_one_data_text_addbac:i,robot_one_data_text_type:a,type:"one",type_name:r,name:$(".robot-main-ul-selected").children(".robot-list-title").text()})}t.push({contcaion_id:$(".robot-main-div-selected").attr("commid"),contcaion_name:$(".robot-main-ul-selected").children(".robot-list-title").text(),data:o}),sessionStorage.setItem("robotx_one",'{"data":'+JSON.stringify(t)+"}")}function robotx_load_one(){}function robotx_save_two(){var t=robotx.getAllConnections();console.log(t);var o=[];$.each(robotx.getAllConnections(),function(t,e){o.push({ConnectionId:e.id,PageSourceId:e.sourceId,PageTargetId:e.targetId,PageSourceIds:$(e.source).attr("data"),PageTargetIds:$(e.target).attr("data"),SourceHtml:e.source.innerHTML,TargetHtml:e.target.innerHTML,type:$(e.source).attr("n1"),type_input:$(e.source).attr("ns"),gl_list:$(e.source).attr("gl"),anchors:$.map(e.endpoints,function(t){return[[t.anchor.x,t.anchor.y,t.anchor.orientation[0],t.anchor.orientation[1],t.anchor.offsets[0],t.anchor.offsets[1]]]})})}),console.log(o);var e=[];$(".robot-main-two-ec").each(function(t,o){var i=$(o);console.log(i),e.push({BlockIdd:i.attr("id"),BlockId:i.attr("data"),BlockName:i.find(".robot-list-title").text(),BlockContent:i.html(),BlockX:parseInt(i.css("left"),0),BlockY:parseInt(i.css("top"),0),type:i.attr("n1"),type_input:i.attr("ns"),gl_list:i.attr("gl")})}),console.log(e),sessionStorage.setItem("robotx_two",'{"robotx_two":'+JSON.stringify(o)+',"block":'+JSON.stringify(e)+"}")}function robotx_load_two(){var t=JSON.parse(sessionStorage.getItem("robotx_two"));console.log(t);for(var o=0;o<t.block.length;o++){if("robotx_content_id"==t.block[o].BlockIdd.substr(0,17))var e='<li id="'+t.block[o].BlockIdd+'" class="robotx_content_id robot-main-two-ec jtk-endpoint-anchor ui-draggable ui-draggable-handle jtk-connected" style="position:absolute; left:'+t.block[o].BlockX+"px;top:"+t.block[o].BlockY+'px;" data="'+t.block[o].BlockId+'" n1="'+t.block[o].type+'" ns="'+t.block[o].type_input+'">'+t.block[o].BlockContent+"</li>";else var e='<li id="'+t.block[o].BlockIdd+'" class=" robot-main-two-ec jtk-endpoint-anchor ui-draggable ui-draggable-handle jtk-connected" style="position:absolute; left:'+t.block[o].BlockX+"px;top:"+t.block[o].BlockY+'px;" data="'+t.block[o].BlockId+'" n1="'+t.block[o].type+'" ns="'+t.block[o].type_input+'" gl="'+t.block[o].gl_list+'">'+t.block[o].BlockContent+"</li>";$("#robot_main_two").append(e)}for(var i=0;i<t.robotx_two.length;i++){for(var l=[],n=(t.robotx_two[i].ConnectionId,t.robotx_two[i].PageSourceId),a=t.robotx_two[i].PageTargetId,r=t.robotx_two[i],o=0;o<2;o++){var s=r.anchors[o],d=s.join(","),c=d.split(","),b=[];b=c.map(function(t){return+t}),l.push(b)}robotx.connect({source:n,target:a,anchors:l,endpoint:["Dot",{radius:4}],connectorStyle:connectorPaintStyle,connectorHoverStyle:connectorHoverStyle,paintStyle:{stroke:"#3cf",strokeWidth:2,outlineColor:"blue",outlineWidth:2},hoverPaintStyle:{stroke:"#f08aa5",strokeWidth:2,outlineColor:"blue",outlineWidth:2},connector:["Flowchart",{stub:30,gap:0,cornerRadius:2,alwaysRespectStubs:!0,midpoint:.5}],maxConnections:10,isSource:!0,isTarget:!0,deleteEndpointsOnDetach:!0}),robotx.addEndpoint(n,{anchors:"TopCenter"},hollowCircle),robotx.addEndpoint(n,{anchors:"RightMiddle"},hollowCircle),robotx.addEndpoint(n,{anchors:"BottomCenter"},hollowCircle),robotx.addEndpoint(n,{anchors:"LeftMiddle"},hollowCircle),robotx.addEndpoint(a,{anchors:"TopCenter"},hollowCircle),robotx.addEndpoint(a,{anchors:"RightMiddle"},hollowCircle),robotx.addEndpoint(a,{anchors:"BottomCenter"},hollowCircle),robotx.addEndpoint(a,{anchors:"LeftMiddle"},hollowCircle),robotx.draggable(n),robotx.draggable(a),$("#"+n).draggable({containment:"parent"}),$("#"+a).draggable({containment:"parent"})}}var list_verise="",container_table_ID="",h=0,u=0,move_width=($("body").width()-900)/2;$(".robot-main").css("left",move_width+"px");var robotx=jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:11},ConnectionOverlays:[["Arrow",{location:1,visible:!0,width:11,length:11,direction:1,id:"arrow_forwards"}]],Container:"robot_main_two"});robotx.importDefaults({ConnectionsDetachable:!0,ReattachConnections:!0});var connectorPaintStyle_robotx={stroke:"#3cf",strokeWidth:2,outlineColor:"blue",outlineWidth:2},connectorHoverStyle_robotx={stroke:"#f08aa5",strokeWidth:2,outlineColor:"blue",outlineWidth:2},hollowCircle_robotx={endpoint:["Dot",{cssClass:"endpointcssClass"}],connectorStyle:connectorPaintStyle_robotx,connectorHoverStyle:connectorHoverStyle_robotx,paintStyle:{fill:"#3cf",radius:4},isSource:!0,connector:["Flowchart",{stub:30,gap:0,cornerRadius:2,alwaysRespectStubs:!0,midpoint:.5}],isTarget:!0,maxConnections:-1};jQuery(document).ready(function(){$(".robot-main").css("top",($(window).height()-600)/2+"px"),robotx.bind("connection",function(t,o){init_robotx(t.connection)}),robotx.bind("dblclick",function(t,o){$(".robot-main-two-fields").show(),$(".robot-main-three-fields").hide(),$(".robot-main-two").addClass("robot-main-change"),$(".robot-main-two-fields-top,.robot-main-two-fields-bottom").show(),$(".robot-main-footer").hide(),$(".robot-main-two-fields-bottom>p").html("从下表中勾选与容器表关联的字段并配置字段类型"),$(".robot-fields-footer button:first-child").show(),$("#robot_main_two_fields_bottom>li").not(":first-child").remove(),$(".top-first").find("p").eq(1).find("span").remove(),$(".top-second").find("p").eq(1).find("span").remove(),$("#robot_main_two_fields_bottom").attr("data",$("#"+t.sourceId).attr("data")),$(".top_three>ul>li>i").removeClass("add-background"),$("#data_time").text("");for(var e=$("#"+t.sourceId).children("ul").children(".robot-list-conetnt").length,i=$("#"+t.targetId).children("ul").children(".robot-list-conetnt").length,l=0,n=0;n<i;n++){var a=$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(n).text(),r=$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(n).attr("data");if($("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(n).children("span").hasClass("robot-list-conetnt-i")){var s="<span>"+a+"</span>",d="",c="";$(".top-first").find("p").eq(1).append(s),$(".top-second").find("p").eq(1).append("<span></span>");for(var b=0;b<e;b++){var u=$("#"+t.sourceId).children("ul").children(".robot-list-conetnt").eq(b).text();if("date"==$("#"+t.sourceId).children("ul").children(".robot-list-conetnt").eq(b).attr("data")){var h="<li>"+u+"</li>";c+=h}var h="<li>"+u+"</li>";d+=h}var _="";if(console.log($("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(n).attr("data_type")),"undefined"==$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(n).attr("data_type")?_="":(_=$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(n).attr("data_type"),4==_.length?$("#data_time").text("年"):7==_.length?$("#data_time").text("月"):10==_.length?$("#data_time").text("日"):13==_.length?$("#data_time").text("时"):16==_.length?$("#data_time").text("分"):19==_.length&&$("#data_time").text("秒")),""!=$("#"+t.sourceId).attr("gl")){var p=$("#"+t.sourceId).attr("gl"),f=p.split(",");if("date"==$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(n).attr("data")){var h='<li><ul><li class="firlds-kuans">'+a+'</li><li class="firlds-kuans robotx_glzds"><label>'+f[l]+'<i></i></label><ul class="robotx_glzd"><li></li>'+c+'</ul></li><li class="fields-skin" data_type="'+_+'">'+r+"</li></ul></li>";$("#robot_main_two_fields_bottom").append(h)}else{var h='<li><ul><li class="firlds-kuans">'+a+'</li><li class="firlds-kuans robotx_glzds"><label>'+f[l]+'<i></i></label><ul class="robotx_glzd"><li></li>'+d+'</ul></li><li class="fields-skin" data_type="'+_+'">'+r+"</li></ul></li>";$("#robot_main_two_fields_bottom").append(h)}l++}else if("date"==$("#"+t.targetId).children("ul").children(".robot-list-conetnt").eq(n).attr("data")){var h='<li><ul><li class="firlds-kuans">'+a+'</li><li class="firlds-kuans robotx_glzds"><label><i></i></label><ul class="robotx_glzd"><li></li>'+c+'</ul></li><li class="fields-skin" data_type="'+_+'">'+r+"</li></ul></li>";$("#robot_main_two_fields_bottom").append(h)}else{var h='<li><ul><li class="firlds-kuans">'+a+'</li><li class="firlds-kuans robotx_glzds"><label><i></i></label><ul class="robotx_glzd"><li></li>'+d+'</ul></li><li class="fields-skin" data_type="'+_+'">'+r+"</li></ul></li>";$("#robot_main_two_fields_bottom").append(h)}}}if(null!=sessionStorage.getItem("robotx_two")){if(""!=$("#"+t.sourceId).attr("n1")){var m=$("#"+t.sourceId).attr("n1");"forward"==m?($(".top_three>ul>li").eq(0).find("i").addClass("add-background"),$(".top_three_input").attr("disabled",!0),$(".top_three_input").val("")):($(".top_three>ul>li").eq(1).find("i").addClass("add-background"),""==$("#"+t.sourceId).attr("ns")?($(".top_three_input").attr("disabled",!0),$(".top_three_input").val("")):($(".top_three_input").attr("disabled",!1),$(".top_three_input").val($("#"+t.sourceId).attr("ns"))))}if(""!=$("#"+t.sourceId).attr("gl"))for(var g=$("#"+t.sourceId).attr("gl"),v=g.split(","),n=0;n<v.length;n++)console.log(n),$(".top-second").find("p").eq(1).find("span").eq(n).text(v[n])}else{if(""!=$("#"+t.sourceId).attr("n1")){var m=$("#"+t.sourceId).attr("n1");"forward"==m?($(".top_three>ul>li").eq(0).find("i").addClass("add-background"),$(".top_three_input").attr("disabled",!0),$(".top_three_input").val("")):($(".top_three>ul>li").eq(1).find("i").addClass("add-background"),""==$("#"+t.sourceId).attr("ns")?($(".top_three_input").attr("disabled",!0),$(".top_three_input").val("")):($(".top_three_input").attr("disabled",!1),$(".top_three_input").val($("#"+t.sourceId).attr("ns"))))}if(""!=$("#"+t.sourceId).attr("gl"))for(var g=$("#"+t.sourceId).attr("gl"),v=g.split(","),n=0;n<v.length;n++)console.log(n),$(".top-second").find("p").eq(1).find("span").eq(n).text(v[n])}})}),$("#robot_main_two_fields_bottom").on("click",".robotx_glzds>label",function(){$(this).parent().find("ul").is(":hidden")?($(".robotx_glzd").hide(),$(this).parent().find("ul").show()):$(this).parent().find("ul").hide()}),$(document).on("click",".robotx_glzd>li",function(){var t=$(this).text();$(this).parent().prev().html(t+"<i></i>");for(var o=$(this).parent().parent().parent().parent().index(),e=$(".top-second>p").eq(1).find("span").eq(o-1).text(),i=0;i<$("#robot_main_two>li").length;i++){if($("#robot_main_two>li").eq(i).attr("data")==$("#robot_main_two_fields_bottom").attr("data"))for(var l=$("#robot_main_two>li").eq(i).attr("id"),n=0;n<$("#"+l+">ul>.robot-list-conetnt").length;n++)$("#"+l+">ul>.robot-list-conetnt").eq(n).text()==e&&$("#"+l+">ul>.robot-list-conetnt").eq(n).attr("ys","0");console.log(i),console.log(o),console.log(9999999),i+1==o&&$(".top-second>p").eq(1).find("span").eq(i).text(t)}$(this).parent().hide(),console.log($(this).parent().parent().next().text()),"date"==$(this).parent().parent().next().text()&&$(".top_three>ul>li").eq(1).find("i").hasClass("add-background")?($(".top_three_input").attr("disabled",!1),$(".top_three_input").val("")):($(".top_three_input").attr("disabled",!0),$(".top_three_input").val(""));for(var i=0;i<$("#robot_main_two>li").length;i++)if($("#robot_main_two>li").eq(i).attr("data")==$("#robot_main_two_fields_bottom").attr("data"))for(var l=$("#robot_main_two>li").eq(i).attr("id"),n=0;n<$("#"+l+">ul>.robot-list-conetnt").length;n++)$("#"+l+">ul>.robot-list-conetnt").eq(n).text()==t&&$("#"+l+">ul>.robot-list-conetnt").eq(n).attr("ys","1")});var mod_hide_id="",modelCounter=0,svg_content=null;$(".c_nav_list-robot").click(function(){$(this).next().toggle()}),$("#c_nav_list_robox>li").click(function(){$("#c_robot_tag").text($(this).text()),$("#c_nav_list_robox").hide(),$(".robot-main-footer").fadeIn()}),$(document).on("click",".hidden_aut",function(){$(this).parent().fadeOut(),$(this).parent().parent().removeClass("robot-main-change"),$(".robot-main-footer").fadeIn()}),$("#robotx_save").click(function(){for(var t=0;t<$("#"+list_verise).find("ul").find(".robot-list-conetnt").length;t++)1==$("#"+list_verise).find("ul").find(".robot-list-conetnt").eq(t).attr("b")&&$("#"+list_verise).find("ul").find(".robot-list-conetnt").eq(t).remove();for(var o=$("#custom_fields").find(".robot-hide-list-ul-father").length,t=0;t<o;t++){var e=$("#custom_fields").find(".robot-hide-list-ul-father").eq(t).children("ul").children(".robot-hide-list-ul-one").find("span").text(),i=$("#custom_fields").find(".robot-hide-list-ul-father").eq(t).children("ul").children(".robot-hide-list-ul-oness").find("span").text(),l=$("#custom_fields").find(".robot-hide-list-ul-father").eq(t).children("ul").children(".robot-hide-list-ul-ones").find("span").text(),n=$("#custom_fields").find(".robot-hide-list-ul-father").eq(t).children("ul").children("li").eq(3).find("input").val(),a=$("#custom_fields").find(".robot-hide-list-ul-father").eq(t).children("ul").children(".robot-hide-list-ul-onesss").find("span").text();if(console.log(list_verise.substr(0,17)),"robotx_content_id"==list_verise.substr(0,17))var r='<li class="robot-list-conetnt" b="1"  m="'+e+'" n="'+i+'" s="'+l+'" data="'+a+'"><span></span>'+n+"</li>";else var r='<li class="robot-list-conetnt" b="1"  m="'+e+'" n="'+i+'" s="'+l+'" data="'+a+'">'+n+"</li>";$("#"+list_verise+">ul").append(r)}$(this).parent().parent().fadeOut(),$(this).parent().parent().parent().removeClass("robot-main-change"),$(".robot-main-footer").fadeIn()}),$("#robotx_save1").click(function(){u=0;for(var t=!1,o=[],e=0;e<$("#robot_main_two_fields_bottom>li").length;e++)$("#robot_main_two_fields_bottom>li").eq(e).children("ul").children("li").eq(2).find("span").hasClass("add-background")&&(t=!0,o.push($("#robot_main_two_fields_bottom>li").eq(e).children("ul").children("li").eq(0).text()));if(o=o.join(","),1==t){var i=sessionStorage.getItem($("#robot_main_two_fields_bottom").attr("data"));JSON.parse(i).data[0].fileName}if($(".top_three>ul>li").eq(1).find("i").hasClass("add-background")){u++;for(var e=0;e<$("#robot_main_two>li").length;e++)$("#robot_main_two_fields_bottom").attr("data")==$("#robot_main_two>li").eq(e).attr("data")&&$("#robot_main_two>li").eq(e).attr("ns",$(".top_three_input").val())}else $(".top_three>ul>li").eq(0).find("i").hasClass("add-background")&&u++;for(var l=0;l<$("#robot_main_two>li").length;l++)if($("#robot_main_two_fields_bottom").attr("data")==$("#robot_main_two>li").eq(l).attr("data")){for(var n=[],e=0;e<$(".top-second>p").eq(1).find("span").length;e++)n.push($(".top-second>p").eq(1).find("span").eq(e).text());$("#robot_main_two>li").eq(l).attr("gl",n)}if(0==u)return layer.alert("请勾选与目标表关系!",{icon:1,title:"提示"}),!1;$(this).parent().parent().fadeOut(),$(this).parent().parent().parent().removeClass("robot-main-change"),$(".robot-main-footer").fadeIn()}),$("#custom_field").click(function(){if($("#custom_fields").find(".robot-hide-list-ul-father").remove(),$(".robot-main-three-fields-bottom").fadeOut(),$(".robot-main-two-fields-three").fadeIn(),null!=sessionStorage.getItem("robotx_two"))for(var t=0;t<$("#robot_main_two>li").length;t++)if(console.log(1),list_verise==$("#robot_main_two>li").eq(t).attr("id")){console.log(t),console.log($("#robot_main_two>li").eq(t).children("ul").children(".robot-list-conetnt").length);for(var o=0;o<$("#robot_main_two>li").eq(t).children("ul").children(".robot-list-conetnt").length;o++)if(console.log(3),1==$("#robot_main_two>li").eq(t).children("ul").children(".robot-list-conetnt").eq(o).attr("b")){console.log(4);for(var e=$("#robot_main_two>li").eq(t).children("ul").children(".robot-list-conetnt").eq(o).attr("m"),i=$("#robot_main_two>li").eq(t).children("ul").children(".robot-list-conetnt").eq(o).attr("n"),l=$("#robot_main_two>li").eq(t).children("ul").children(".robot-list-conetnt").eq(o).attr("s"),n=$("#robot_main_two>li").eq(t).children("ul").children(".robot-list-conetnt").eq(o).attr("data"),a=$("#robot_main_two>li").eq(t).children("ul").children(".robot-list-conetnt").eq(o).text(),r="",s=0;s<$("#"+list_verise).find("ul").find(".robot-list-conetnt").length;s++){var d="<li>"+$("#"+list_verise).find("ul").find(".robot-list-conetnt").eq(s).text()+"</li>";r+=d}$("#custom_fields").append('<li class="robot-hide-list-ul-father"><ul><li class="robot-hide-list-ul-one"><span>'+e+'</span><ul class="robot-hide-list-ul">'+r+'</ul></li><li class="robot-hide-list-ul-oness"><span>'+i+'</span><ul class="robot-hide-list-ulss"><li n="+">+</li><li n="-">-</li><li n="*">×</li><li n="/">÷</li></ul></li><li class="robot-hide-list-ul-ones"><span>'+l+'</span><ul class="robot-hide-list-uls">'+r+'</ul></li><li><input type="text" class="robot-hide-ul-input" value="'+a+'"></li><li class="robot-hide-list-ul-onesss"><span>'+n+'</span><ul class="robot-hide-list-ulsss"><li>numeric</li><li>factor</li><li>date</li></ul></li><li><div class="robotx_list_close"></div></li></ul></li>')}}}),$("#custom_add").click(function(){for(var t="",o=0;o<$("#"+list_verise).find("ul").find(".robot-list-conetnt").length;o++){t+="<li>"+$("#"+list_verise).find("ul").find(".robot-list-conetnt").eq(o).text()+"</li>"}var e='<li class="robot-hide-list-ul-father"><ul><li class="robot-hide-list-ul-one"><span></span><ul class="robot-hide-list-ul">'+t+'</ul></li><li class="robot-hide-list-ul-oness"><span></span><ul class="robot-hide-list-ulss"><li n="+">+</li><li n="-">-</li><li n="*">&times;</li><li n="/">&divide;</li></ul></li><li class="robot-hide-list-ul-ones"><span></span><ul class="robot-hide-list-uls">'+t+'</ul></li><li><input type="text" class="robot-hide-ul-input" /></li><li class="robot-hide-list-ul-onesss"><span></span><ul class="robot-hide-list-ulsss"><li>numeric</li><li>factor</li><li>date</li></ul></li><li><div class="robotx_list_close"></div></li></ul></li>';$(".first-list").after(e)}),$(document).on("click",".robot-hide-list-ul-one",function(){$(this).children("ul").toggle()}),$(document).on("click",".robot-hide-list-ul>li",function(){$(this).parent().prev().text($(this).text())}),$(document).on("click",".robot-hide-list-ul-ones",function(){$(this).children("ul").toggle()}),$(document).on("click",".robot-hide-list-uls>li",function(){$(this).parent().prev().text($(this).text())}),$(document).on("click",".robot-hide-list-ul-oness",function(){$(this).children("ul").toggle()}),$(document).on("click",".robot-hide-list-ulss>li",function(){$(this).parent().prev().text($(this).text())}),$(document).on("click",".robot-hide-list-ul-onesss",function(){$(this).children("ul").toggle()}),$(document).on("click",".robot-hide-list-ulsss>li",function(){$(this).parent().prev().text($(this).text())}),$(document).on("click",".robtx_help",function(){$(".robotx_tips").is(":hidden")?$(".robotx_tips").slideDown():$(".robotx_tips").slideUp()}),$(document).on("click","#robotx_tips_close",function(){$(".robotx_tips").slideUp()}),$(document).on("click",".top_three>ul>li>i",function(){if($(".top_three>ul>li>i").removeClass("add-background"),$(this).hasClass("add-background"))$(this).removeClass("add-background");else{if($(this).addClass("add-background"),"1:1"==$(this).next().text()){$(".top_three_input").attr("disabled",!0),$(".top_three_input").val("");for(var t=0;t<$("#robot_main_two>li").length;t++)$("#robot_main_two>li").eq(t).attr("data")==$("#robot_main_two_fields_bottom").attr("data")&&$("#robot_main_two>li").eq(t).attr("ns","")}else for(var t=1;t<$("#robot_main_two_fields_bottom>li").length;t++)"date"==$("#robot_main_two_fields_bottom>li").eq(t).find("ul").children("li").eq(2).text()&&$(".top_three_input").attr("disabled",!1);for(var t=0;t<$("#robot_main_two>li").length;t++)$("#robot_main_two>li").eq(t).attr("data")==$("#robot_main_two_fields_bottom").attr("data")&&("1:1"==$(this).next().text()?$("#robot_main_two>li").eq(t).attr("n1","forward"):$("#robot_main_two>li").eq(t).attr("n1","backward"))}}),$(document).on("click",".robotx_list_close",function(){$(this).parent().parent().parent().remove();for(var t=$(this).parent().prev().prev().children("input").val(),o=0;o<$("#"+list_verise).find("ul").find(".robot-list-conetnt").length;o++)t==$("#"+list_verise).find("ul").find(".robot-list-conetnt").eq(o).text()&&$("#"+list_verise).find("ul").find(".robot-list-conetnt").eq(o).remove()}),$(".robot-main").on("click",".robot-fields-select-key",function(){robotx_stuss=!0,robotx_stus=!1,$(this).hasClass("add-background")?$(this).removeClass("add-background"):($(this).addClass("add-background"),$(this).next().addClass("add-background"))}),$(document).on("click",".robot-fields-select-elem",function(){robotx_stuss=!0,robotx_stus=!1,$(this).hasClass("add-background")?(console.log(123456789),$(this).removeClass("add-background"),$(this).prev().removeClass("add-background")):$(this).addClass("add-background")}),$(document).on("click",""),$(".robot-main-three-top-search-content>input").on("input propertychange",function(){var t=$(this).val();if($(".robot-main-three-content-content>ul").children("li").show(),""==t)$(".robot-main-three-content-content>ul").children("li").show();else for(var o=0;o<$(".robot-main-three-content-content>ul>li").length;o++)-1==$(".robot-main-three-content-content>ul").children("li").eq(o).children("ul").children("li").eq(0).text().indexOf(t)&&-1==$(".robot-main-three-content-content>ul").children("li").eq(o).children("ul").children("li").eq(1).text().indexOf(t)&&-1==$(".robot-main-three-content-content>ul").children("li").eq(o).children("ul").children("li").eq(2).text().indexOf(t)&&$(".robot-main-three-content-content>ul").children("li").eq(o).hide()}),$(".robot-success").click(function(){if($("#guide_three").hasClass("div-checked")){robotx_save_two(),$(".robot-main-one").hide(),$(".robot-main-two").hide(),$(".robot-main-three").show(),$("#guide_three").removeClass("div-checked"),$("#guide_three span").removeClass("div-checked-span").addClass("guideones").text(""),$("#guide_four").addClass("div-checked"),$("#guide_four span").addClass("div-checked-span");var t=[];$.each(robotx.getAllConnections(),function(o,e){t.push({PageSourceId:e.sourceId,PageTargetId:e.targetId})}),$(".robot-main-three-content-content>ul").html("");for(var o="",e=0;e<t.length;e++)for(var i=0;i<$("#"+t[e].PageSourceId+">ul>.robot-list-conetnt").length;i++){var l=$("#"+t[e].PageSourceId).children("ul").children(".robot-list-conetnt").eq(i).attr("data_type"),n=$("#"+t[e].PageSourceId).children("ul").children(".robot-list-conetnt").eq(i).text(),a=$("#"+t[e].PageSourceId).children("ul").children(".robot-list-conetnt").eq(i).attr("data"),r='<li><ul><li class="robotx-list-four1">'+n+'</li><li class="robotx-list-four2">'+a+'</li><li class="robotx-list-four3">'+$("#"+t[e].PageSourceId).children("ul").children(".robot-list-title").text()+'</li><li class="robotx-list-four4"></li></ul></li>';o+=r;var s=JSON.parse(sessionStorage.getItem("robotx_one"));s.data[0].data.push({robot_one_data_filds_addbac:0,robot_one_data_filds_text:n,robot_one_data_text_addbac:0,robot_one_data_text_type:a,type:"two",type_name:l,name:$("#"+t[e].PageSourceId).find("ul").find("li").eq(0).text()}),sessionStorage.setItem("robotx_one",JSON.stringify(s))}for(var d="",c=$(".right-main").attr("souid").split(","),e=0;e<c.length;e++){d+='<components  value="'+c[e]+'"/>'}
var b=JSON.parse(sessionStorage.getItem("robotx_one")),u=JSON.parse(sessionStorage.getItem("robotx_two"));console.log(u);for(var _="",p="",f=0;f<b.data[0].data.length;f++){if(console.log(b.data[0].data[f].robot_one_data_text_type),"date"==b.data[0].data[f].robot_one_data_text_type){console.log(f);var m='<field table="'+b.data[0].data[f].name+'" name="'+b.data[0].data[f].robot_one_data_filds_text+'" type="'+b.data[0].data[f].robot_one_data_text_type+'" format="'+b.data[0].data[f].type_name+'"/>'}else var m='<field table="'+b.data[0].data[f].name+'" name="'+b.data[0].data[f].robot_one_data_filds_text+'" type="'+b.data[0].data[f].robot_one_data_text_type+'"  />';_+=m}for(var g=0;g<u.robotx_two.length;g++){var v=[];u.robotx_two[g].type,u.robotx_two[g].type;for(var i=0;i<$(u.robotx_two[g].SourceHtml).find(".robot-list-conetnt").length;i++)"1"==$(u.robotx_two[g].SourceHtml).find(".robot-list-conetnt").eq(i).attr("ys")&&v.push($(u.robotx_two[g].SourceHtml).find(".robot-list-conetnt").eq(i).text());console.log(v);for(var x=[],i=0;i<$(u.robotx_two[g].TargetHtml).find(".robot-list-conetnt").length;i++)"1"==$(u.robotx_two[g].TargetHtml).find(".robot-list-conetnt").eq(i).attr("ys")&&x.push($(u.robotx_two[0].TargetHtml).find(".robot-list-conetnt").eq(i).text());for(var k=u.robotx_two[g].gl_list,w=k.split(","),C=[],y=[],q=0;q<w.length;q++)""==w[q]||(C.push(w[q]),y.push(x[q]));p+='<relation source="'+$(u.robotx_two[g].SourceHtml).find(".robot-list-title").text()+'" target="'+b.data[0].contcaion_name+'" join_source="'+C+'" join_target="'+y+'" type="'+u.robotx_two[g].type+'" interval="'+u.robotx_two[g].type_input+'" />'}var r='<props> <prop  name="componentID" value="'+$(".right-main").attr("data")+'"/><prop  name="projectID" value="'+proid+'"/><prop  name="dictOnly" value="N"/><prop  name="components">'+d+'</prop><prop name="describe">'+_+'</prop><prop name="relation">'+p+"</prop></props>";$.ajax({type:"post",url:robotx_generate_fields,data:{xml:r},success:function(t){console.log(t);for(var o="",e=0;e<t.detail.length;e++){o+='<li><ul><li class="robotx-list-four1">'+t.detail[e].field+'</li><li class="robotx-list-four2">'+t.detail[e].type+'</li><li class="robotx-list-four3">'+t.detail[e].table+'</li><li class="robotx-list-four4">'+t.detail[e].describe+"</li></ul></li>"}$(".robot-main-three-content-content>ul").append(o)},error:function(){layer.msg("接口请求失败")}}),$(".robot-success").text("保存"),robotx_stus=!1,robotx_stuss=!1}else if($("#guide_two").hasClass("div-checked"))$("#robot_main_two").html(""),$(".robot-main-one").hide(),$(".robot-main-two").show(),$(".robot-main-three").hide(),$("#guide_two").removeClass("div-checked"),$("#guide_two span").removeClass("div-checked-span").addClass("guideones").text(""),$("#guide_three").addClass("div-checked"),$("#guide_three span").addClass("div-checked-span"),$(".robot-main-two-fields").hide(),robotx_save_one(sessionStorage.getItem("robotx_two")),"null"!=sessionStorage.getItem("robotx_two")&&0==robotx_stus&&0==robotx_stuss?robotx_load_two():(addpoint(),0==h&&($(".robot-fail").click(),layer.alert("请勾选主键!",{icon:1,title:"提示"})));else if($("#guide_four").hasClass("div-checked")){save_load_gif($(this),!0);robotx_json_data.push({type:"robotx",componentID:$("#robotx-main").attr("data"),projectID:proid,souid:$("#robotx-main").attr("souid"),dictOnly:"Y"}),xml='{"data":'+JSON.stringify(robotx_json_data)+"}",console.log(xml),sessionStorage.setItem($("#robotx-main").attr("data"),xml),save_load_gif($(this),!1),layer.alert("保存成功!",{icon:1,title:"提示"}),$(".robot-main-two-ec").each(function(){robotx.detachAllConnections($(this))}),$(".robot-main-one").show(),$(".robot-main-two").hide(),$(".robot-main-three").hide(),$("#guide_one").removeClass("div-checked"),$("#guide_one span").removeClass("div-checked-span").removeClass("guideones").text("1"),$("#guide_two").removeClass("div-checked"),$("#guide_two span").removeClass("div-checked-span").removeClass("guideones").text("2"),$("#guide_three").removeClass("div-checked"),$("#guide_three span").removeClass("div-checked-span").removeClass("guideones").text("3"),$("#guide_four").removeClass("div-checked"),$("#guide_four span").removeClass("div-checked-span").removeClass("guideones").text("4"),$(".robot-main-two-fields").hide(),$(".robot-main").fadeOut(),$(".robot-success").text("下一步")}}),$(".robot-fail").click(function(){$("#guide_one").hasClass("div-checked")?$(".robot-main").fadeOut():$("#guide_two").hasClass("div-checked")?($(".robot-main-one").show(),$(".robot-main-two").hide(),$(".robot-main-three").hide(),$("#guide_two").removeClass("div-checked"),$("#guide_two span").removeClass("div-checked-span").removeClass("guideones").text("2"),$("#guide_one").addClass("div-checked"),$("#guide_one span").addClass("div-checked-span").removeClass("guideones").text("1"),$(".robot-main-one-edit-left img").show(),$("#robot_main_one_left_p").show(),$("#robot_one_right_p").show(),$(".robot-main-div-selected").remove(),$(".robot-main-p-selected").remove(),$(".robot-main-fields").remove(),$(".robot-fail").html("取&nbsp;&nbsp;消")):$("#guide_three").hasClass("div-checked")?($(".robot-main-one").show(),$(".robot-main-two").hide(),$(".robot-main-three").hide(),$("#guide_three").removeClass("div-checked"),$("#guide_three span").removeClass("div-checked-span").removeClass("guideones").text("3"),$("#guide_two").addClass("div-checked"),$("#guide_two span").addClass("div-checked-span").removeClass("guideones").text("2")):$("#guide_four").hasClass("div-checked")&&($(".robot-main-one").hide(),$(".robot-main-two").show(),$(".robot-main-three").hide(),$("#guide_four").removeClass("div-checked"),$("#guide_four span").removeClass("div-checked-span").removeClass("guideones").text("4"),$("#guide_three").addClass("div-checked"),$("#guide_three span").addClass("div-checked-span").removeClass("guideones").text("3"),$(".robot-success").text("下一步"))}),$(document).on("dblclick","#robot_main_two>li",function(){list_verise=$(this).attr("id");var t=$(this).find(".robot-list-title").text();$(".robot-main-two-fields").hide(),$(".robot-main-three-fields").show(),$(".robot-main-three-fields-bottom").show(),$(".robot-main-two-fields-three").hide(),$(".robot-main-two").addClass("robot-main-change"),$(".robot-main-footer").hide(),$(".robot-main-three-fields-bottom>p").html(t+"表字段配置"),$("#robot_main_three_fields_bottom>li").not(":first-child").remove();for(var o=$(this).children("ul").children(".robot-list-conetnt").length,e=0;e<o;e++){var i=$(this).children("ul").find(".robot-list-conetnt").eq(e).text(),l=$(this).children("ul").find(".robot-list-conetnt").eq(e).attr("data");$("#robot_main_three_fields_bottom").append('<li><ul><li class="firlds-kuan">'+i+'</li><li class="firlds-kuan">'+l+"</li></ul></li>")}$("#robot_main_three_fields_bottom .fields-skin").not(":first-child").each(function(){var t=0;$(this).click(function(){t++,t%2!=0?$(this).children().addClass("add-background"):$(this).children().removeClass("add-background")})})});var robotx_json_data=[];$("#m_robot_save").click(function(){save_load_gif($(this),!0),robotx_json_data.push({type:"robotx",componentID:$("#robotx-main").attr("data"),projectID:proid,souid:$("#robotx-main").attr("souid")}),xml='{"data":'+JSON.stringify(robotx_json_data)+"}",sessionStorage.setItem($("#robotx-main").attr("data"),xml),save_load_gif($(this),!1),layer.alert("保存成功!",{icon:1,title:"提示"})}),$("#m_robot_configure").click(function(){function t(t,o){var e=$(t.draggable).attr("id");modelCounter++;$(".robot-main-one-edit-left img").hide(),$("#robot_main_one_left_p").hide(),$("#robot_one_right_p").hide(),$(".robot-main-div-selected").remove(),$(".robot-main-p-selected").remove(),$(".robot-main-fields").remove(),$(o).append('<div class="robot-main-div-selected" commid="'+$(t.draggable).find("li").eq(0).text()+'" ><ul class="robot-main-one-table-list robot-main-ul-selected"><li class="robot-list-title">'+$(t.draggable).find(".robot-list-title").text()+'</li></ul></div><p class="robot-main-p-selected">已选择<span>'+$(t.draggable).find(".robot-list-title").text()+"</span>作为容器表</p>");for(var i=0;i<$(t.draggable).find(".robot-list-conetnt").length;i++)$(".robot-main-div-selected ul").append('<li class="robot-list-conetnt">'+$(t.draggable).find(".robot-list-conetnt").eq(i).text()+"</li>");for(var l=$(t.draggable).find("li:first-child").text(),n=null,i=0;i<d.length;i++)d[i].componentID==l&&(n=i);$(".robot-main-one-edit-right").append('<ul class="robot-main-fields"><li class="robot-fields-title"><ul><li class="robot-fields-name">字段名</li><li class="robot-fields-key">主键</li><li class="robot-fields-elem">是否保留字段</li></ul></li></ul>');for(var i=0;i<return_info[n].length;i++)$(".robot-main-fields").append('<li><ul><li class="robot-fields-name" data="'+return_info[n][i].fieldType+'" data_type="'+return_info[n][i].fieldDateFormat+'" >'+return_info[n][i].fieldName+'</li><li class="robot-fields-select-key icon iconfont icon-duihao1"></li><li class="robot-fields-select-elem icon iconfont icon-duihao1 add-background"></li></ul></li>');$("#guide_one").removeClass("div-checked"),$("#guide_one span").removeClass("div-checked-span").addClass("guideones").text(""),$("#guide_two").addClass("div-checked"),$("#guide_two span").addClass("div-checked-span"),$(".robot-fail").text("上一步"),""!=mod_hide_id&&$("#"+mod_hide_id).show(),$(o).children().length>0&&$("#robot_one>li").draggable({scope:"plant"})}var o=$("#robotx-main").attr("souid"),e=o.split(",");if($(".robot-main").fadeIn(),$("#robot_one").html(""),"null"!=sessionStorage.getItem("robotx_one")&&0==robotx_stus){var i=JSON.parse(sessionStorage.getItem("robotx_one"));$(".robot-main-one-edit-left img").hide(),$("#robot_main_one_left_p").hide(),$("#robot_one_right_p").hide(),$(".robot-main-div-selected").remove(),$(".robot-main-p-selected").remove(),$(".robot-main-fields").remove();for(var l="",n=0;n<i.data[0].data.length;n++)if("one"==i.data[0].data[n].type){var a='<li class="robot-list-conetnt">'+i.data[0].data[n].robot_one_data_filds_text+"</li>";l+=a}var a=' <div class="robot-main-div-selected" commid="'+i.data[0].contcaion_id+'"><ul class="robot-main-one-table-list robot-main-ul-selected"><li class="robot-list-title">'+i.data[0].contcaion_name+"</li>"+l+"</ul></div>";$(".robot-main-one-edit-left").append(a),$(".robot-main-one-edit-left").append('<p class="robot-main-p-selected">已选择<span>'+i.data[0].contcaion_name+"</span>作为容器表</p>");var r="",s="";$(".robot-main-one-edit-right").append('<ul class="robot-main-fields"><li class="robot-fields-title"><ul><li class="robot-fields-name">字段名</li><li class="robot-fields-key">主键</li><li class="robot-fields-elem">是否保留字段</li></ul></li></ul>');for(var n=0;n<i.data[0].data.length;n++)"one"==i.data[0].data[n].type&&(r=1==i.data[0].data[n].robot_one_data_filds_addbac?"add-background":"",s=1==i.data[0].data[n].robot_one_data_text_addbac?"add-background":"",console.log(i.data[0].data[n].type_name),"undefined"==i.data[0].data[n].type_name&&(i.data[0].data[n].type_name=""),$(".robot-main-fields").append('<li><ul><li class="robot-fields-name" data="'+i.data[0].data[n].robot_one_data_text_type+'" data_type="'+i.data[0].data[n].type_name+'">'+i.data[0].data[n].robot_one_data_filds_text+'</li><li class="robot-fields-select-key icon iconfont icon-duihao1 '+r+'"></li><li class="robot-fields-select-elem icon iconfont icon-duihao1 '+s+'"></li></ul></li>'));$("#guide_one").removeClass("div-checked"),$("#guide_one span").removeClass("div-checked-span").addClass("guideones").text(""),$("#guide_two").addClass("div-checked"),$("#guide_two span").addClass("div-checked-span"),$(".robot-fail").text("上一步")}for(var d=[],n=0;n<e.length;n++)d.push(JSON.parse(sessionStorage.getItem(e[n])).data[0]);tablechinese=[],return_info=[];for(var n=0;n<d.length;n++)tablechinese.push(d[n].tableName),$.ajax({type:"post",url:learn_load_data,async:!1,data:{projectID:d[n].projectID,componentID:d[n].componentID,fileName:d[n].fileName,separator:d[n].separator},success:function(t){console.log(t),return_info.push(t.detail)},error:function(){layer.msg("接口请求失败")}});for(var n=0;n<tablechinese.length;n++){console.log(return_info),$("#robot_one").append('<li id="table_'+n+'" style="margin-left:28px;"><ul class="robot-main-one-table-list"><li style="display:none" >'+d[n].componentID+'</li><li class="robot-list-title">'+tablechinese[n]+"</li></ul></li>");for(var c=0;c<return_info[n].length;c++)console.log(8989),"date"!=return_info[n][c].fieldType?$("#robot_one #table_"+n+" ul").append('<li class="robot-list-conetnt" data="'+return_info[n][c].fieldType+'" data_type="" >'+return_info[n][c].fieldName+"</li>"):$("#robot_one #table_"+n+" ul").append('<li class="robot-list-conetnt" data="'+return_info[n][c].fieldType+'" data_type="'+return_info[n][c].fieldDateFormat+'" >'+return_info[n][c].fieldName+"</li>")}$("#robot_one>li").draggable({scope:"plant",helper:"clone"}),$(".robot-main-one-edit-left").droppable({scope:"plant",drop:function(o,e){robotx_stuss=!0,null!=$(".robot-main-one-edit-left").find(".robot-main-div-selected")&&void 0!=$(".robot-main-one-edit-left").find(".robot-main-div-selected")&&0!=$(".robot-main-one-edit-left").find(".robot-main-div-selected").length?(mod_hide_id=$(".robot-main-one-edit-left").find(".robot-list-title").text(),robotx_stuss=!0,robotx_stus=!0,t(e,$(this))):(robotx_stuss=!0,robotx_stus=!0,t(e,$(this)))}})}),$(".icon-guanbi").click(function(){$(".robot-main-one").show(),$(".robot-main-two").hide(),$(".robot-main-three").hide(),$("#guide_one").removeClass("div-checked"),$("#guide_one span").removeClass("div-checked-span").removeClass("guideones").text("1"),$("#guide_two").removeClass("div-checked"),$("#guide_two span").removeClass("div-checked-span").removeClass("guideones").text("2"),$("#guide_three").removeClass("div-checked"),$("#guide_three span").removeClass("div-checked-span").removeClass("guideones").text("3"),$("#guide_four").removeClass("div-checked"),$("#guide_four span").removeClass("div-checked-span").removeClass("guideones").text("4"),$(".robot-main-two-fields").hide(),$(".robot-main").fadeOut(),$(".robot-success").text("下一步")});