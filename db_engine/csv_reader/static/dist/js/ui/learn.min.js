$(function(){$(".right-heads>ul>li").click(function(){var a=$(this).index(),i=$("#gbm").text();0==a?($(".right-content>ul").eq(0).show(),$(".right-content>ul").eq(1).hide()):($(".right-content>ul").eq(1).show(),$(".right-content>ul").eq(0).hide(),"GBDT"==i?($(".learn_if_show_for_gbm").show(),$(".learn_if_show_for_rf").hide(),$(".learn_if_show_for_cart").hide(),$(".learn_if_show_for_xgboost").hide(),$(".learn_if_show_for_svm").hide(),$(".learn_if_show_for_lasso").hide(),$(".learn_if_show_for_adaboost").hide()):"Random Forest"==i?($(".learn_if_show_for_gbm").hide(),$(".learn_if_show_for_rf").show(),$(".learn_if_show_for_cart").hide(),$(".learn_if_show_for_xgboost").hide(),$(".learn_if_show_for_svm").hide(),$(".learn_if_show_for_lasso").hide(),$(".learn_if_show_for_adaboost").hide()):"CART"==i?($(".learn_if_show_for_gbm").hide(),$(".learn_if_show_for_rf").hide(),$(".learn_if_show_for_cart").show(),$(".learn_if_show_for_xgboost").hide(),$(".learn_if_show_for_svm").hide(),$(".learn_if_show_for_lasso").hide(),$(".learn_if_show_for_adaboost").hide()):"Xgboost"==i?($(".learn_if_show_for_gbm").hide(),$(".learn_if_show_for_rf").hide(),$(".learn_if_show_for_cart").hide(),$(".learn_if_show_for_xgboost").show(),$(".learn_if_show_for_svm").hide(),$(".learn_if_show_for_lasso").hide(),$(".learn_if_show_for_adaboost").hide()):"SVM"==i?($(".learn_if_show_for_gbm").hide(),$(".learn_if_show_for_rf").hide(),$(".learn_if_show_for_cart").hide(),$(".learn_if_show_for_xgboost").hide(),$(".learn_if_show_for_svm").show(),$(".learn_if_show_for_lasso").hide(),$(".learn_if_show_for_adaboost").hide()):"Naive Bayes"==i?($(".learn_if_show_for_gbm").hide(),$(".learn_if_show_for_rf").hide(),$(".learn_if_show_for_cart").hide(),$(".learn_if_show_for_xgboost").hide(),$(".learn_if_show_for_svm").hide(),$(".learn_if_show_for_lasso").hide(),$(".learn_if_show_for_adaboost").hide()):"Logistic Regression"==i?($(".learn_if_show_for_gbm").hide(),$(".learn_if_show_for_rf").hide(),$(".learn_if_show_for_cart").hide(),$(".learn_if_show_for_xgboost").hide(),$(".learn_if_show_for_svm").hide(),$(".learn_if_show_for_lasso").hide(),$(".learn_if_show_for_adaboost").hide()):"LASSO"==i?($(".learn_if_show_for_gbm").hide(),$(".learn_if_show_for_rf").hide(),$(".learn_if_show_for_cart").hide(),$(".learn_if_show_for_xgboost").hide(),$(".learn_if_show_for_svm").hide(),$(".learn_if_show_for_lasso").show(),$(".learn_if_show_for_adaboost").hide()):"Neural Network"==i?($(".learn_if_show_for_gbm").hide(),$(".learn_if_show_for_rf").hide(),$(".learn_if_show_for_cart").hide(),$(".learn_if_show_for_xgboost").hide(),$(".learn_if_show_for_svm").hide(),$(".learn_if_show_for_lasso").hide(),$(".learn_if_show_for_adaboost").hide()):"AdaBoost"==i?($(".learn_if_show_for_gbm").hide(),$(".learn_if_show_for_rf").hide(),$(".learn_if_show_for_cart").hide(),$(".learn_if_show_for_xgboost").hide(),$(".learn_if_show_for_svm").hide(),$(".learn_if_show_for_lasso").hide(),$(".learn_if_show_for_adaboost").show()):"Stacking"==i&&($(".learn_if_show_for_gbm").hide(),$(".learn_if_show_for_rf").hide(),$(".learn_if_show_for_cart").hide(),$(".learn_if_show_for_xgboost").hide(),$(".learn_if_show_for_svm").hide(),$(".learn_if_show_for_lasso").hide(),$(".learn_if_show_for_adaboost").hide()))});var a="";$(".metric-css").click(function(){$("#metric_classification").hide(),$("#metric_regression").hide(),$(".metric-css").find("i").removeClass("metric-i-active"),$(this).find("i").addClass("metric-i-active"),a=$(this).index(),0==a?$("#c_data_metric").text("auc"):$("#c_data_metric").text("rmse")}),$(".c_nav_list_metric").click(function(){0==a?$("#metric_classification").is(":hidden")?($("#metric_classification").show(),$("#metric_regression").hide()):$("#metric_classification").hide():$("#metric_regression").is(":hidden")?($("#metric_classification").hide(),$("#metric_regression").show()):$("#metric_regression").hide()}),$(".discre>i").click(function(){$(this).hasClass("metric-i-active")?$(this).removeClass("metric-i-active"):$(this).addClass("metric-i-active")}),$(".c-learn-newadd").click(function(){$(".c-learn-newadd").before('<div class="c-learn-miss"><input type="text"><div class="c-add-close"></div></div>')}),$(document).on("click",".c-add-close",function(){$(this).parent().remove()}),$(".c_nav_list").click(function(){$("#c_learn_lib_list").hide(),$("#c_learn_data_list").hide(),$(this).next().toggle(30)}),$(document).on("click",".right-content>ul>li>ul>li",function(){var a=$(this).text();if($(this).parent().parent().find("em").text(a),$(this).parent().parent().find("em").css("color","#858585"),$(this).parent().hide(),console.log(456),"c_learn_data_list"==$(this).parent().attr("id")){console.log(789),$("#c_data_learn_id_list").html(""),$("#c_data_learn_target_list").html("");var i=$(this).attr("projectid"),o=$(this).attr("commid"),e=$(this).attr("separator");$(this).parent().prev().children("em").attr("projectid",i),$(this).parent().prev().children("em").attr("commid",o),$(this).parent().prev().children("em").attr("separator",e),$.ajax({type:"post",url:learn_load_data,data:{projectID:i,componentID:o,separator:e},success:function(a){console.log(a),$(".onther_ul").html("");for(var i=0;i<a.detail.length;i++)$("#c_data_learn_id_list").append("<li>"+a.detail[i].fieldName+"</li>"),$("#c_data_learn_target_list").append("<li>"+a.detail[i].fieldName+"</li>")},error:function(){layer.msg("请求接口失败")}})}else if("c_learn_lib_list"==$(this).parent().attr("id")){var t=$(this).attr("projectid"),r=$(this).attr("commid"),_=$(this).attr("separator");$(this).parent().prev().children("em").attr("projectid",t),$(this).parent().prev().children("em").attr("commid",r),$(this).parent().prev().children("em").attr("separator",_)}}),$(".c_save_learn").click(function(){save_load_gif($(this),!0);var a=[],i=$("#learn-main").attr("souid"),o=$("#learn-main").attr("data"),e=$("#c_one_data").attr("commid"),t=$("#c_data_two").attr("commid"),r=$("#c_data_learn_id").text(),_=$("#c_data_learn_target").text(),s=$("#misssymbols").val(),n=$("#collinearitycutoff").val(),l=$("#unbalancedcutoff").val(),c=[],f=$("#gbm").text();console.log(f),"GBDT"==f?f="gbm":"Random Forest"==f?f="rf":"CART"==f?f="cart":"Xgboost"==f?f="xgb":"SVM"==f?f="svm":"Naive Bayes"==f?f="naivebayes":"Logistic Regression"==f?f="lr":"LASSO"==f?f="lasso":"Neural Network"==f?f="nnet":"AdaBoost"==f?f="adaboost":"Stacking"==f&&(f="stacking"),console.log(f);for(var d=$("#c_data_metric").text(),h=$("#ntree").val(),m=$("#ntree_rf").val(),p=$("#mtry").val(),u=$("#nodesize").val(),v=$("#minsplit").val(),b=$("#cp").val(),g=$("#eta").val(),w=$("#nrounds").val(),y=$("#early_stopping_rounds").val(),x=$("#subsample").val(),D=$("#colsample_bytree").val(),I=$("#max_depth").val(),j=$("#min_child_weight").val(),k=$("#gamma").val(),z=$("#lambda").val(),S=$("#alpha").val(),N=$("#c").val(),C=$("#svm_gamma").val(),A=0;A<$(".c-learn-miss").length;A++)c.push($(".c-learn-miss").eq(A).find("input").val());var B="";B=!!$(".discre>i").hasClass("metric-i-active");var R=$("#interaction").val(),q=$("#shrinkage").val(),L=$("#n_minobsinnode").val(),T=$("#alpha_lasso").val(),O=$("#lambda_lasso").val(),F=$("#minsplit_adaboost").val(),G=$("#cp_adaboost").val(),M=$("#iter_adaboost").val();"gbm"==f?a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,ntree:h,interaction:R,shrinkage:q,n_minobsinnode:L,metric:d,discretization:B}):"rf"==f?a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,ntree_rf:m,mtry:p,nodesize:u,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,metric:d,discretization:B}):"cart"==f?a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,minsplit:v,cp:b,metric:d,discretization:B}):"xgb"==f?a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,eta:g,nrounds:w,early_stopping_rounds:y,subsample:x,colsample_bytree:D,max_depth:I,min_child_weight:j,gamma:k,metric:d,discretization:B,lambda:z,alpha:S}):"svm"==f?a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,svm_c:N,svm_gamma:C,metric:d,discretization:B}):"naivebayes"==f?a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,metric:d,discretization:B}):"lr"==f?a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,metric:d,discretization:B}):"lasso"==f?a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,metric:d,discretization:B,lasso_alpha:T,lasso_lambda:O}):"nnet"==f?a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,metric:d,discretization:B}):"adaboost"==f?a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,metric:d,discretization:B,minsplit_adaboost:F,cp_adaboost:G,iter_adaboost:M}):"stacking"==f&&a.push({projectID:proid,souid:i,componentID:o,robotx:"",type:"learn",algorithm:f,data:e,dict:t,id_varname:r,target_varname:_,fs_cutoff:s,collinearity_cutoff:n,unbalanced_cutoff:l,miss_symbols:c,metric:d,discretization:B}),xml='{"data":'+JSON.stringify(a)+"}",console.log(xml),save_load_gif($(this),!1),sessionStorage.setItem(o,xml),layer.alert("保存成功!",{icon:1,title:"提示"})})});