jQuery&&jQuery.fn.upload||function(r){if(r.support.ajaxProgress="onprogress"in r.ajaxSettings.xhr()){var e=r.ajax;r.ajax=function(t,a){"object"==typeof t&&(a=t,t=a.url),a=a||{};var n,s=r.Deferred(),o=a.xhr||r.ajaxSettings.xhr;a.xhr=function(){var e=this,t=o.call(r.ajaxSettings);if(t){var a=function(t){return function(a){e.global&&r.event.trigger("ajaxProgress",[a,t,n]),r.isFunction(e.progress)&&e.progress(n,a,t),s.notifyWith(n,[a,t])}};t.upload.addEventListener("progress",a(!0),!1),t.addEventListener("progress",a(!1),!1)}return t},n=e.call(this,t,a);for(var i in s.promise())n[i](s[i]);return n.progress=s.progress,n},r.upload=function(e,t,a,n){return jQuery.isFunction(t)&&(n=n||a,a=t,t=void 0),r.ajax({processData:!1,contentType:!1,type:"POST",url:e,data:t,success:a,dataType:n})}}}(jQuery);